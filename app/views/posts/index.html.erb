
<% if @posts.present? %>
    <h2>Posts</h2>
    <div class="container-fluid">
        <table class="table table-striped table-image">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">S.no.</th>
                    <th scope="col">User Name</th>
                    <th scope="col">Title</th>
                    <th scope="col">Image</th>
                    <th scope="col">Description</th>
                    <th scope="col">Published</th>
                    <% if current_user.present?%>
                        <th scope="col">Action</th>
                        <th scope="col">Comments</th>
                    <%end%>
                </tr>
            </thead>
            <tbody>  
                <% @posts.each_with_index do |posts, i|%>
                <tr>
                    <th scope="row"><%= i+1 %></th>
                    <td> <%= posts.user.name%></td>
                    <td><%= posts.title %></td>
                    <td><% if posts.image.exists? %>
                            <%= image_tag(posts.image.url, width: "150", height: "150")%>
                        <%end%>
                    </td>
                    <td><%= strip_tags( posts.description ) %></td>
                    <td><%= posts.published%></td>
                    <%if current_user.present?%>
                        <td><%= link_to "", post_path(posts.id), class: "bi bi-eye-fill"%>
                            <% if current_user.role == "superadmin"  %>
                                <%= link_to "", "/posts/#{posts.id}", method: "delete", data: {confirm: "are you sure ?"}, class: "bi bi-trash3-fill"%>
                                <%= link_to "", edit_post_path(posts.id), class: "bi bi-pencil-square" %>
                            <%end%>
                            <% if (current_user.role == "admin" || current_user.role == "user") && (current_user.name == posts.user.name) %>
                                <%= link_to "", edit_post_path(posts.id), class: "bi bi-pencil-square" %>
                                <%= link_to "", "/posts/#{posts.id}", method: "delete", data: {confirm: "are you sure ?"}, class: "bi bi-trash3-fill"%>
                            <%end%>
                        </td>
                        <td><%if posts.comments.present? %>
                                <%= link_to posts.comments.count, "/posts/#{posts.id}/comments", class: "bi bi-chat-right-dots-fill"%>
                            <%else%>
                                No comments!
                            <%end%>
                        </td>
                    <%end%>
                </tr>
                <%end%>
            </tbody>
        </table>
    </div>
<%else%>
    <h5> There is no post..!</h5>
<%end%>
<%= paginate @posts%>

<%#= paginate @posts, left: 1, right: 3 %>
<%#= paginate @posts, outer_window: 3  %>
<b><%#= link_to 'Back', users_path%></b>
          
